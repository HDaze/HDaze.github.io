{{ define "main" -}}
<div class="main-content">
    <div class="posts">
        {{ partial "tagged-posts.html" . }}
        <h2>最近更新</h2>
        {{ range (.Paginate (where .Site.RegularPages "Type" "in" .Site.Params.front_page_content)).Pages }}
        <article class="post-card">
            <div class="post-content">
                <header class="post-header">
                    <h2 class="post-title"><a href="{{ .Permalink }}">{{ .Title }}</a></h2>
                    <div class="post-date">{{ .Date.Format "January 2, 2006" }}</div>
                </header>
                <ul class="tags">
                    {{ range .Params.tags }}
                    <li><a href="{{ "/tags/" | relURL }}{{ . | urlize }}">{{ . }}</a></li>
                    {{ end }}
                </ul>
                <div class="summary">
                    {{ .Summary | truncate 50 }}
                    {{ if .Truncated }}
                    <div class="read-more-link">
                        <a href="{{ .RelPermalink }}">Read More…</a>
                    </div>
                    {{ end }}
                </div>
            </div>
        </article>
        {{- end }}
    </div>

    <aside class="sidebar-widgets">
        <!-- Tags Section -->
        <section class="widget">
            <h3>Tags</h3>
            <ul class="tags">
                {{ range $name, $taxonomy := .Site.Taxonomies.tags }}
                <li>
                    <a href="{{ "tags/" | relURL }}{{ $name | urlize }}">{{ $name }} ({{ len $taxonomy.Pages }})</a>
                </li>
                {{ end }}
            </ul>
        </section>

        <!-- Categories Section -->
        <section class="widget">
            <h3>Categories</h3>
            <ul class="categories">
                {{ range $name, $taxonomy := .Site.Taxonomies.categories }}
                <li>
                    <a href="{{ "categories/" | relURL }}{{ $name | urlize }}">{{ $name }} ({{ len $taxonomy.Pages }})</a>
                </li>
                {{ end }}
            </ul>
        </section>
    </aside>
</div>
{{ partial "pagination.html" . }}
{{- end }}
